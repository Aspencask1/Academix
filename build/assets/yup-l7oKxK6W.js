import{aG as S}from"./index-0GGCgQc5.js";var oe=e=>e.type==="checkbox",ie=e=>e instanceof Date,U=e=>e==null;const rt=e=>typeof e=="object";var p=e=>!U(e)&&!Array.isArray(e)&&rt(e)&&!ie(e),st=e=>p(e)&&e.target?oe(e.target)?e.target.checked:e.target.value:e,Dt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,it=(e,i)=>e.has(Dt(i)),St=e=>{const i=e.constructor&&e.constructor.prototype;return p(i)&&i.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let i;const r=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Oe&&(e instanceof Blob||e instanceof FileList))&&(r||p(e)))if(i=r?[]:{},!r&&!St(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=M(e[s]));else return e;return i}var fe=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,c=(e,i,r)=>{if(!i||!p(e))return r;const s=fe(i.split(/[,[\].]+?/)).reduce((n,a)=>U(n)?n:n[a],e);return k(s)||s===e?k(e[i])?r:e[i]:s},N=e=>typeof e=="boolean";const ve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},I={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},kt=S.createContext(null),Le=()=>S.useContext(kt);var nt=(e,i,r,s=!0)=>{const n={defaultValues:i._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const o=a;return i._proxyFormState[o]!==I.all&&(i._proxyFormState[o]=!s||I.all),r&&(r[o]=!0),e[o]}});return n},P=e=>p(e)&&!Object.keys(e).length,ut=(e,i,r,s)=>{r(e);const{name:n,...a}=e;return P(a)||Object.keys(a).length>=Object.keys(i).length||Object.keys(a).find(o=>i[o]===(!s||I.all))},ye=e=>Array.isArray(e)?e:[e],at=(e,i,r)=>!e||!i||e===i||ye(e).some(s=>s&&(r?s===i:s.startsWith(i)||i.startsWith(s)));function Te(e){const i=S.useRef(e);i.current=e,S.useEffect(()=>{const r=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Et(e){const i=Le(),{control:r=i.control,disabled:s,name:n,exact:a}=e||{},[o,g]=S.useState(r._formState),h=S.useRef(!0),m=S.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=S.useRef(n);return b.current=n,Te({disabled:s,next:F=>h.current&&at(b.current,F.name,a)&&ut(F,m.current,r._updateFormState)&&g({...r._formState,...F}),subject:r._subjects.state}),S.useEffect(()=>(h.current=!0,m.current.isValid&&r._updateValid(!0),()=>{h.current=!1}),[r]),nt(o,r,m.current,!1)}var G=e=>typeof e=="string",lt=(e,i,r,s,n)=>G(e)?(s&&i.watch.add(e),c(r,e,n)):Array.isArray(e)?e.map(a=>(s&&i.watch.add(a),c(r,a))):(s&&(i.watchAll=!0),r);function pt(e){const i=Le(),{control:r=i.control,name:s,defaultValue:n,disabled:a,exact:o}=e||{},g=S.useRef(s);g.current=s,Te({disabled:a,subject:r._subjects.values,next:b=>{at(g.current,b.name,o)&&m(M(lt(g.current,r._names,b.values||r._formValues,!1,n)))}});const[h,m]=S.useState(r._getWatch(s,n));return S.useEffect(()=>r._removeUnmounted()),h}var Ue=e=>/^\w*$/.test(e),ot=e=>fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),w=(e,i,r)=>{let s=-1;const n=Ue(i)?[i]:ot(i),a=n.length,o=a-1;for(;++s<a;){const g=n[s];let h=r;if(s!==o){const m=e[g];h=p(m)||Array.isArray(m)?m:isNaN(+n[s+1])?{}:[]}e[g]=h,e=e[g]}return e};function Ct(e){const i=Le(),{name:r,disabled:s,control:n=i.control,shouldUnregister:a}=e,o=it(n._names.array,r),g=pt({control:n,name:r,defaultValue:c(n._formValues,r,c(n._defaultValues,r,e.defaultValue)),exact:!0}),h=Et({control:n,name:r}),m=S.useRef(n.register(r,{...e.rules,value:g,...N(e.disabled)?{disabled:e.disabled}:{}}));return S.useEffect(()=>{const b=n._options.shouldUnregister||a,F=(_,q)=>{const T=c(n._fields,_);T&&(T._f.mount=q)};if(F(r,!0),b){const _=M(c(n._options.defaultValues,r));w(n._defaultValues,r,_),k(c(n._formValues,r))&&w(n._formValues,r,_)}return()=>{(o?b&&!n._state.action:b)?n.unregister(r):F(r,!1)}},[r,n,o,a]),S.useEffect(()=>{c(n._fields,r)&&n._updateDisabledField({disabled:s,fields:n._fields,name:r,value:c(n._fields,r)._f.value})},[s,r,n]),{field:{name:r,value:g,...N(s)||h.disabled?{disabled:h.disabled||s}:{},onChange:S.useCallback(b=>m.current.onChange({target:{value:st(b),name:r},type:ve.CHANGE}),[r]),onBlur:S.useCallback(()=>m.current.onBlur({target:{value:c(n._formValues,r),name:r},type:ve.BLUR}),[r,n]),ref:b=>{const F=c(n._fields,r);F&&b&&(F._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}},formState:h,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(h.touchedFields,r)},error:{enumerable:!0,get:()=>c(h.errors,r)}})}}const zt=e=>e.render(Ct(e));var ft=(e,i,r,s,n)=>i?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},$e=e=>({isOnSubmit:!e||e===I.onSubmit,isOnBlur:e===I.onBlur,isOnChange:e===I.onChange,isOnAll:e===I.all,isOnTouch:e===I.onTouched}),ze=(e,i,r)=>!r&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const le=(e,i,r,s)=>{for(const n of r||Object.keys(e)){const a=c(e,n);if(a){const{_f:o,...g}=a;if(o){if(o.refs&&o.refs[0]&&i(o.refs[0],n)&&!s)break;if(o.ref&&i(o.ref,o.name)&&!s)break;le(g,i)}else p(g)&&le(g,i)}}};var Ot=(e,i,r)=>{const s=fe(c(e,r));return w(s,"root",i[r]),w(e,r,s),e},Re=e=>e.type==="file",X=e=>typeof e=="function",ge=e=>{if(!Oe)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},he=e=>G(e),Me=e=>e.type==="radio",_e=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var ct=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je};const Xe={isValid:!1,value:null};var dt=e=>Array.isArray(e)?e.reduce((i,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:i,Xe):Xe;function Ye(e,i,r="validate"){if(he(e)||Array.isArray(e)&&e.every(he)||N(e)&&!e)return{type:r,message:he(e)?e:"",ref:i}}var se=e=>p(e)&&!_e(e)?e:{value:e,message:""},Ze=async(e,i,r,s,n)=>{const{ref:a,refs:o,required:g,maxLength:h,minLength:m,min:b,max:F,pattern:_,validate:q,name:T,valueAsNumber:ce,mount:Ae,disabled:Q}=e._f,A=c(i,T);if(!Ae||Q)return{};const K=o?o[0]:a,$=x=>{s&&K.reportValidity&&(K.setCustomValidity(N(x)?"":x||""),K.reportValidity())},C={},ne=Me(a),te=oe(a),me=ne||te,W=(ce||Re(a))&&k(a.value)&&k(A)||ge(a)&&a.value===""||A===""||Array.isArray(A)&&!A.length,Y=ft.bind(null,T,r,C),z=(x,V,E,R=J.maxLength,B=J.minLength)=>{const j=x?V:E;C[T]={type:x?R:B,message:j,ref:a,...Y(x?R:B,j)}};if(n?!Array.isArray(A)||!A.length:g&&(!me&&(W||U(A))||N(A)&&!A||te&&!ct(o).isValid||ne&&!dt(o).isValid)){const{value:x,message:V}=he(g)?{value:!!g,message:g}:se(g);if(x&&(C[T]={type:J.required,message:V,ref:K,...Y(J.required,V)},!r))return $(V),C}if(!W&&(!U(b)||!U(F))){let x,V;const E=se(F),R=se(b);if(!U(A)&&!isNaN(A)){const B=a.valueAsNumber||A&&+A;U(E.value)||(x=B>E.value),U(R.value)||(V=B<R.value)}else{const B=a.valueAsDate||new Date(A),j=de=>new Date(new Date().toDateString()+" "+de),Z=a.type=="time",ue=a.type=="week";G(E.value)&&A&&(x=Z?j(A)>j(E.value):ue?A>E.value:B>new Date(E.value)),G(R.value)&&A&&(V=Z?j(A)<j(R.value):ue?A<R.value:B<new Date(R.value))}if((x||V)&&(z(!!x,E.message,R.message,J.max,J.min),!r))return $(C[T].message),C}if((h||m)&&!W&&(G(A)||n&&Array.isArray(A))){const x=se(h),V=se(m),E=!U(x.value)&&A.length>+x.value,R=!U(V.value)&&A.length<+V.value;if((E||R)&&(z(E,x.message,V.message),!r))return $(C[T].message),C}if(_&&!W&&G(A)){const{value:x,message:V}=se(_);if(_e(x)&&!A.match(x)&&(C[T]={type:J.pattern,message:V,ref:a,...Y(J.pattern,V)},!r))return $(V),C}if(q){if(X(q)){const x=await q(A,i),V=Ye(x,K);if(V&&(C[T]={...V,...Y(J.validate,V.message)},!r))return $(V.message),C}else if(p(q)){let x={};for(const V in q){if(!P(x)&&!r)break;const E=Ye(await q[V](A,i),K,V);E&&(x={...E,...Y(V,E.message)},$(E.message),r&&(C[T]=x))}if(!P(x)&&(C[T]={ref:K,...x},!r))return C}}return $(!0),C};function Lt(e,i){const r=i.slice(0,-1).length;let s=0;for(;s<r;)e=k(e)?s++:e[i[s++]];return e}function Tt(e){for(const i in e)if(e.hasOwnProperty(i)&&!k(e[i]))return!1;return!0}function L(e,i){const r=Array.isArray(i)?i:Ue(i)?[i]:ot(i),s=r.length===1?e:Lt(e,r),n=r.length-1,a=r[n];return s&&delete s[a],n!==0&&(p(s)&&P(s)||Array.isArray(s)&&Tt(s))&&L(e,r.slice(0,-1)),e}var ke=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}},be=e=>U(e)||!rt(e);function ee(e,i){if(be(e)||be(i))return e===i;if(ie(e)&&ie(i))return e.getTime()===i.getTime();const r=Object.keys(e),s=Object.keys(i);if(r.length!==s.length)return!1;for(const n of r){const a=e[n];if(!s.includes(n))return!1;if(n!=="ref"){const o=i[n];if(ie(a)&&ie(o)||p(a)&&p(o)||Array.isArray(a)&&Array.isArray(o)?!ee(a,o):a!==o)return!1}}return!0}var yt=e=>e.type==="select-multiple",Ut=e=>Me(e)||oe(e),Ee=e=>ge(e)&&e.isConnected,ht=e=>{for(const i in e)if(X(e[i]))return!0;return!1};function Ve(e,i={}){const r=Array.isArray(e);if(p(e)||r)for(const s in e)Array.isArray(e[s])||p(e[s])&&!ht(e[s])?(i[s]=Array.isArray(e[s])?[]:{},Ve(e[s],i[s])):U(e[s])||(i[s]=!0);return i}function vt(e,i,r){const s=Array.isArray(e);if(p(e)||s)for(const n in e)Array.isArray(e[n])||p(e[n])&&!ht(e[n])?k(i)||be(r[n])?r[n]=Array.isArray(e[n])?Ve(e[n],[]):{...Ve(e[n])}:vt(e[n],U(i)?{}:i[n],r[n]):r[n]=!ee(e[n],i[n]);return r}var pe=(e,i)=>vt(e,i,Ve(i)),gt=(e,{valueAsNumber:i,valueAsDate:r,setValueAs:s})=>k(e)?e:i?e===""?NaN:e&&+e:r&&G(e)?new Date(e):s?s(e):e;function Ce(e){const i=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):i.disabled))return Re(i)?i.files:Me(i)?dt(e.refs).value:yt(i)?[...i.selectedOptions].map(({value:r})=>r):oe(i)?ct(e.refs).value:gt(k(i.value)?e.ref.value:i.value,e)}var Rt=(e,i,r,s)=>{const n={};for(const a of e){const o=c(i,a);o&&w(n,a,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},ae=e=>k(e)?e:_e(e)?e.source:p(e)?_e(e.value)?e.value.source:e.value:e,Mt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function et(e,i,r){const s=c(e,r);if(s||Ue(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const a=n.join("."),o=c(i,a),g=c(e,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(g&&g.type)return{name:a,error:g};n.pop()}return{name:r}}var Bt=(e,i,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(i||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,Pt=(e,i)=>!fe(c(e,i)).length&&L(e,i);const Nt={mode:I.onSubmit,reValidateMode:I.onChange,shouldFocusError:!0};function It(e={},i){let r={...Nt,...e},s={submitCount:0,isDirty:!1,isLoading:X(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},a=p(r.defaultValues)||p(r.values)?M(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:M(a),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,b=0;const F={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={values:ke(),array:ke(),state:ke()},q=$e(r.mode),T=$e(r.reValidateMode),ce=r.criteriaMode===I.all,Ae=t=>u=>{clearTimeout(b),b=setTimeout(t,u)},Q=async t=>{if(F.isValid||t){const u=r.resolver?P((await W()).errors):await z(n,!0);u!==s.isValid&&_.state.next({isValid:u})}},A=t=>F.isValidating&&_.state.next({isValidating:t}),K=(t,u=[],l,y,d=!0,f=!0)=>{if(y&&l){if(g.action=!0,f&&Array.isArray(c(n,t))){const v=l(c(n,t),y.argA,y.argB);d&&w(n,t,v)}if(f&&Array.isArray(c(s.errors,t))){const v=l(c(s.errors,t),y.argA,y.argB);d&&w(s.errors,t,v),Pt(s.errors,t)}if(F.touchedFields&&f&&Array.isArray(c(s.touchedFields,t))){const v=l(c(s.touchedFields,t),y.argA,y.argB);d&&w(s.touchedFields,t,v)}F.dirtyFields&&(s.dirtyFields=pe(a,o)),_.state.next({name:t,isDirty:V(t,u),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else w(o,t,u)},$=(t,u)=>{w(s.errors,t,u),_.state.next({errors:s.errors})},C=t=>{s.errors=t,_.state.next({errors:s.errors,isValid:!1})},ne=(t,u,l,y)=>{const d=c(n,t);if(d){const f=c(o,t,k(l)?c(a,t):l);k(f)||y&&y.defaultChecked||u?w(o,t,u?f:Ce(d._f)):B(t,f),g.mount&&Q()}},te=(t,u,l,y,d)=>{let f=!1,v=!1;const D={name:t},O=!!(c(n,t)&&c(n,t)._f.disabled);if(!l||y){F.isDirty&&(v=s.isDirty,s.isDirty=D.isDirty=V(),f=v!==D.isDirty);const H=O||ee(c(a,t),u);v=!!(!O&&c(s.dirtyFields,t)),H||O?L(s.dirtyFields,t):w(s.dirtyFields,t,!0),D.dirtyFields=s.dirtyFields,f=f||F.dirtyFields&&v!==!H}if(l){const H=c(s.touchedFields,t);H||(w(s.touchedFields,t,l),D.touchedFields=s.touchedFields,f=f||F.touchedFields&&H!==l)}return f&&d&&_.state.next(D),f?D:{}},me=(t,u,l,y)=>{const d=c(s.errors,t),f=F.isValid&&N(u)&&s.isValid!==u;if(e.delayError&&l?(m=Ae(()=>$(t,l)),m(e.delayError)):(clearTimeout(b),m=null,l?w(s.errors,t,l):L(s.errors,t)),(l?!ee(d,l):d)||!P(y)||f){const v={...y,...f&&N(u)?{isValid:u}:{},errors:s.errors,name:t};s={...s,...v},_.state.next(v)}A(!1)},W=async t=>r.resolver(o,r.context,Rt(t||h.mount,n,r.criteriaMode,r.shouldUseNativeValidation)),Y=async t=>{const{errors:u}=await W(t);if(t)for(const l of t){const y=c(u,l);y?w(s.errors,l,y):L(s.errors,l)}else s.errors=u;return u},z=async(t,u,l={valid:!0})=>{for(const y in t){const d=t[y];if(d){const{_f:f,...v}=d;if(f){const D=h.array.has(f.name),O=await Ze(d,o,ce,r.shouldUseNativeValidation&&!u,D);if(O[f.name]&&(l.valid=!1,u))break;!u&&(c(O,f.name)?D?Ot(s.errors,O,f.name):w(s.errors,f.name,O[f.name]):L(s.errors,f.name))}v&&await z(v,u,l)}}return l.valid},x=()=>{for(const t of h.unMount){const u=c(n,t);u&&(u._f.refs?u._f.refs.every(l=>!Ee(l)):!Ee(u._f.ref))&&xe(t)}h.unMount=new Set},V=(t,u)=>(t&&u&&w(o,t,u),!ee(Be(),a)),E=(t,u,l)=>lt(t,h,{...g.mount?o:k(u)?a:G(t)?{[t]:u}:u},l,u),R=t=>fe(c(g.mount?o:a,t,e.shouldUnregister?c(a,t,[]):[])),B=(t,u,l={})=>{const y=c(n,t);let d=u;if(y){const f=y._f;f&&(!f.disabled&&w(o,t,gt(u,f)),d=ge(f.ref)&&U(u)?"":u,yt(f.ref)?[...f.ref.options].forEach(v=>v.selected=d.includes(v.value)):f.refs?oe(f.ref)?f.refs.length>1?f.refs.forEach(v=>(!v.defaultChecked||!v.disabled)&&(v.checked=Array.isArray(d)?!!d.find(D=>D===v.value):d===v.value)):f.refs[0]&&(f.refs[0].checked=!!d):f.refs.forEach(v=>v.checked=v.value===d):Re(f.ref)?f.ref.value="":(f.ref.value=d,f.ref.type||_.values.next({name:t,values:{...o}})))}(l.shouldDirty||l.shouldTouch)&&te(t,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Fe(t)},j=(t,u,l)=>{for(const y in u){const d=u[y],f=`${t}.${y}`,v=c(n,f);(h.array.has(t)||!be(d)||v&&!v._f)&&!ie(d)?j(f,d,l):B(f,d,l)}},Z=(t,u,l={})=>{const y=c(n,t),d=h.array.has(t),f=M(u);w(o,t,f),d?(_.array.next({name:t,values:{...o}}),(F.isDirty||F.dirtyFields)&&l.shouldDirty&&_.state.next({name:t,dirtyFields:pe(a,o),isDirty:V(t,f)})):y&&!y._f&&!U(f)?j(t,f,l):B(t,f,l),ze(t,h)&&_.state.next({...s}),_.values.next({name:t,values:{...o}}),!g.mount&&i()},ue=async t=>{const u=t.target;let l=u.name,y=!0;const d=c(n,l),f=()=>u.type?Ce(d._f):st(t),v=D=>{y=Number.isNaN(D)||D===c(o,l,D)};if(d){let D,O;const H=f(),re=t.type===ve.BLUR||t.type===ve.FOCUS_OUT,Ft=!Mt(d._f)&&!r.resolver&&!c(s.errors,l)&&!d._f.deps||Bt(re,c(s.touchedFields,l),s.isSubmitted,T,q),De=ze(l,h,re);w(o,l,H),re?(d._f.onBlur&&d._f.onBlur(t),m&&m(0)):d._f.onChange&&d._f.onChange(t);const Se=te(l,H,re,!1),xt=!P(Se)||De;if(!re&&_.values.next({name:l,type:t.type,values:{...o}}),Ft)return F.isValid&&Q(),xt&&_.state.next({name:l,...De?{}:Se});if(!re&&De&&_.state.next({...s}),A(!0),r.resolver){const{errors:Ge}=await W([l]);if(v(H),y){const wt=et(s.errors,n,l),Ke=et(Ge,n,wt.name||l);D=Ke.error,l=Ke.name,O=P(Ge)}}else D=(await Ze(d,o,ce,r.shouldUseNativeValidation))[l],v(H),y&&(D?O=!1:F.isValid&&(O=await z(n,!0)));y&&(d._f.deps&&Fe(d._f.deps),me(l,O,D,Se))}},de=(t,u)=>{if(c(s.errors,u)&&t.focus)return t.focus(),1},Fe=async(t,u={})=>{let l,y;const d=ye(t);if(A(!0),r.resolver){const f=await Y(k(t)?t:d);l=P(f),y=t?!d.some(v=>c(f,v)):l}else t?(y=(await Promise.all(d.map(async f=>{const v=c(n,f);return await z(v&&v._f?{[f]:v}:v)}))).every(Boolean),!(!y&&!s.isValid)&&Q()):y=l=await z(n);return _.state.next({...!G(t)||F.isValid&&l!==s.isValid?{}:{name:t},...r.resolver||!t?{isValid:l}:{},errors:s.errors,isValidating:!1}),u.shouldFocus&&!y&&le(n,de,t?d:h.mount),y},Be=t=>{const u={...a,...g.mount?o:{}};return k(t)?u:G(t)?c(u,t):t.map(l=>c(u,l))},Pe=(t,u)=>({invalid:!!c((u||s).errors,t),isDirty:!!c((u||s).dirtyFields,t),isTouched:!!c((u||s).touchedFields,t),error:c((u||s).errors,t)}),bt=t=>{t&&ye(t).forEach(u=>L(s.errors,u)),_.state.next({errors:t?s.errors:{}})},Ne=(t,u,l)=>{const y=(c(n,t,{_f:{}})._f||{}).ref;w(s.errors,t,{...u,ref:y}),_.state.next({name:t,errors:s.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},Vt=(t,u)=>X(t)?_.values.subscribe({next:l=>t(E(void 0,u),l)}):E(t,u,!0),xe=(t,u={})=>{for(const l of t?ye(t):h.mount)h.mount.delete(l),h.array.delete(l),u.keepValue||(L(n,l),L(o,l)),!u.keepError&&L(s.errors,l),!u.keepDirty&&L(s.dirtyFields,l),!u.keepTouched&&L(s.touchedFields,l),!r.shouldUnregister&&!u.keepDefaultValue&&L(a,l);_.values.next({values:{...o}}),_.state.next({...s,...u.keepDirty?{isDirty:V()}:{}}),!u.keepIsValid&&Q()},Ie=({disabled:t,name:u,field:l,fields:y,value:d})=>{if(N(t)){const f=t?void 0:k(d)?Ce(l?l._f:c(y,u)._f):d;w(o,u,f),te(u,f,!1,!1,!0)}},we=(t,u={})=>{let l=c(n,t);const y=N(u.disabled);return w(n,t,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:t}},name:t,mount:!0,...u}}),h.mount.add(t),l?Ie({field:l,disabled:u.disabled,name:t,value:u.value}):ne(t,!0,u.value),{...y?{disabled:u.disabled}:{},...r.progressive?{required:!!u.required,min:ae(u.min),max:ae(u.max),minLength:ae(u.minLength),maxLength:ae(u.maxLength),pattern:ae(u.pattern)}:{},name:t,onChange:ue,onBlur:ue,ref:d=>{if(d){we(t,u),l=c(n,t);const f=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,v=Ut(f),D=l._f.refs||[];if(v?D.find(O=>O===f):f===l._f.ref)return;w(n,t,{_f:{...l._f,...v?{refs:[...D.filter(Ee),f,...Array.isArray(c(a,t))?[{}]:[]],ref:{type:f.type,name:t}}:{ref:f}}}),ne(t,!1,void 0,f)}else l=c(n,t,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||u.shouldUnregister)&&!(it(h.array,t)&&g.action)&&h.unMount.add(t)}}},qe=()=>r.shouldFocusError&&le(n,de,h.mount),At=t=>{N(t)&&(_.state.next({disabled:t}),le(n,(u,l)=>{let y=t;const d=c(n,l);d&&N(d._f.disabled)&&(y||(y=d._f.disabled)),u.disabled=y},0,!1))},We=(t,u)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let y=M(o);if(_.state.next({isSubmitting:!0}),r.resolver){const{errors:d,values:f}=await W();s.errors=d,y=f}else await z(n);L(s.errors,"root"),P(s.errors)?(_.state.next({errors:{}}),await t(y,l)):(u&&await u({...s.errors},l),qe(),setTimeout(qe)),_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(s.errors),submitCount:s.submitCount+1,errors:s.errors})},mt=(t,u={})=>{c(n,t)&&(k(u.defaultValue)?Z(t,M(c(a,t))):(Z(t,u.defaultValue),w(a,t,M(u.defaultValue))),u.keepTouched||L(s.touchedFields,t),u.keepDirty||(L(s.dirtyFields,t),s.isDirty=u.defaultValue?V(t,M(c(a,t))):V()),u.keepError||(L(s.errors,t),F.isValid&&Q()),_.state.next({...s}))},je=(t,u={})=>{const l=t?M(t):a,y=M(l),d=t&&!P(t)?y:a;if(u.keepDefaultValues||(a=l),!u.keepValues){if(u.keepDirtyValues)for(const f of h.mount)c(s.dirtyFields,f)?w(d,f,c(o,f)):Z(f,c(d,f));else{if(Oe&&k(t))for(const f of h.mount){const v=c(n,f);if(v&&v._f){const D=Array.isArray(v._f.refs)?v._f.refs[0]:v._f.ref;if(ge(D)){const O=D.closest("form");if(O){O.reset();break}}}}n={}}o=e.shouldUnregister?u.keepDefaultValues?M(a):{}:M(d),_.array.next({values:{...d}}),_.values.next({values:{...d}})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!g.mount&&i(),g.mount=!F.isValid||!!u.keepIsValid,g.watch=!!e.shouldUnregister,_.state.next({submitCount:u.keepSubmitCount?s.submitCount:0,isDirty:u.keepDirty?s.isDirty:!!(u.keepDefaultValues&&!ee(t,a)),isSubmitted:u.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:u.keepDirtyValues?s.dirtyFields:u.keepDefaultValues&&t?pe(a,t):{},touchedFields:u.keepTouched?s.touchedFields:{},errors:u.keepErrors?s.errors:{},isSubmitSuccessful:u.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},He=(t,u)=>je(X(t)?t(o):t,u);return{control:{register:we,unregister:xe,getFieldState:Pe,handleSubmit:We,setError:Ne,_executeSchema:W,_getWatch:E,_getDirty:V,_updateValid:Q,_removeUnmounted:x,_updateFieldArray:K,_updateDisabledField:Ie,_getFieldArray:R,_reset:je,_resetDefaultValues:()=>X(r.defaultValues)&&r.defaultValues().then(t=>{He(t,r.resetOptions),_.state.next({isLoading:!1})}),_updateFormState:t=>{s={...s,...t}},_disableForm:At,_subjects:_,_proxyFormState:F,_setErrors:C,get _fields(){return n},get _formValues(){return o},get _state(){return g},set _state(t){g=t},get _defaultValues(){return a},get _names(){return h},set _names(t){h=t},get _formState(){return s},set _formState(t){s=t},get _options(){return r},set _options(t){r={...r,...t}}},trigger:Fe,register:we,handleSubmit:We,watch:Vt,setValue:Z,getValues:Be,reset:He,resetField:mt,clearErrors:bt,unregister:xe,setError:Ne,setFocus:(t,u={})=>{const l=c(n,t),y=l&&l._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&(d.focus(),u.shouldSelect&&d.select())}},getFieldState:Pe}}function Jt(e={}){const i=S.useRef(),r=S.useRef(),[s,n]=S.useState({isDirty:!1,isValidating:!1,isLoading:X(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:X(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...It(e,()=>n(o=>({...o}))),formState:s});const a=i.current.control;return a._options=e,Te({subject:a._subjects.state,next:o=>{ut(o,a._proxyFormState,a._updateFormState,!0)&&n({...a._formState})}}),S.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),S.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),S.useEffect(()=>{e.values&&!ee(e.values,r.current)?(a._reset(e.values,a._options.resetOptions),r.current=e.values,n(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),S.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),S.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),i.current.formState=nt(s,a),i.current}var tt=function(e,i,r){if(e&&"reportValidity"in e){var s=c(r,i);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},_t=function(e,i){var r=function(n){var a=i.fields[n];a&&a.ref&&"reportValidity"in a.ref?tt(a.ref,n,e):a.refs&&a.refs.forEach(function(o){return tt(o,n,e)})};for(var s in i.fields)r(s)},qt=function(e,i){i.shouldUseNativeValidation&&_t(e,i);var r={};for(var s in e){var n=c(i.fields,s),a=Object.assign(e[s]||{},{ref:n&&n.ref});if(jt(i.names||Object.keys(e),s)){var o=Object.assign({},Wt(c(r,s)));w(o,"root",a),w(r,s,o)}else w(r,s,a)}return r},Wt=function(e){return Array.isArray(e)?e.filter(Boolean):[]},jt=function(e,i){return e.some(function(r){return r.startsWith(i+".")})};function Qt(e,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),function(s,n,a){try{return Promise.resolve(function(o,g){try{var h=(i.context,Promise.resolve(e[r.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},i,{context:n}))).then(function(m){return a.shouldUseNativeValidation&&_t({},a),{values:r.raw?s:m,errors:{}}}))}catch(m){return g(m)}return h&&h.then?h.then(void 0,g):h}(0,function(o){if(!o.inner)throw o;return{values:{},errors:qt((g=o,h=!a.shouldUseNativeValidation&&a.criteriaMode==="all",(g.inner||[]).reduce(function(m,b){if(m[b.path]||(m[b.path]={message:b.message,type:b.type}),h){var F=m[b.path].types,_=F&&F[b.type];m[b.path]=ft(b.path,h,m,b.type,_?[].concat(_,b.message):b.message)}return m},{})),a)};var g,h}))}catch(o){return Promise.reject(o)}}}export{zt as C,Qt as o,Jt as u};

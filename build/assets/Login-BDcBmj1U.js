import{A as E,X as F,d as T,j as e,G as P,Y as A,T as x,k as f,N as j,g as C,Z as L}from"./index-0GGCgQc5.js";import"./styled.component-BrJt8NDi.js";import"./styles.component-B_MFmkMU.js";import{F as k,a as N,S as W}from"./styles.component-BIt1iqvu.js";import{u as B,o as I}from"./yup-l7oKxK6W.js";import{u as _}from"./useMutation-DW6lAXSi.js";import{u as D}from"./app.route.state-BHKaGZie.js";import{d as M,a as R}from"./VisibilityOff-COrxoVG6.js";const V=()=>{const{show:r}=E(),{appNavigate:a}=D();return _({mutationFn:async s=>(await F.login(s)).data,onSuccess:(s,n)=>{var i;r({title:"Login Successfully",color:"Success"}),((i=s.data)==null?void 0:i.user.role)==="admin"?a("adminDashboard"):a("/")}})},G=({toggleEye:r})=>r?e.jsx(M,{}):e.jsx(R,{}),X=()=>{var u,p;const r=B({resolver:I(L),defaultValues:{email:"",password:""},mode:"onTouched"}),{mutate:a,isPending:s}=V(),{register:n,handleSubmit:i,formState:{errors:t,isValid:y},setError:m,clearErrors:w}=r,S=o=>{a(o,{onError:d=>{var g,h;const v=((h=(g=d==null?void 0:d.response)==null?void 0:g.data)==null?void 0:h.error)||"An unexpected error occurred.";m("email",{type:"custom"}),m("password",{type:"custom",message:v})}})},[l,b]=T.useState(!1),c=()=>{var o;((o=t.password)==null?void 0:o.type)==="custom"&&w(["email","password"])};return e.jsx(k,{children:e.jsxs(N,{elevation:3,children:[e.jsxs("form",{onSubmit:o=>void i(S)(o),children:[e.jsx(W,{label:"Email",placeholder:"Email",fullWidth:!0,margin:"normal",...n("email",{onChange:()=>c()}),error:!!t.email,helperText:(u=t.email)==null?void 0:u.message}),e.jsxs("div",{children:[e.jsx(P,{label:"Password",placeholder:"Password",fullWidth:!0,margin:"normal",type:l?"text":"password",...n("password",{onChange:()=>c()}),error:!!t.password,helperText:(p=t.password)==null?void 0:p.message,InputProps:{endAdornment:e.jsx(A,{onClick:()=>b(!l),children:e.jsx(G,{toggleEye:l})})}}),e.jsx(x,{variant:"body2.500",component:j,to:f.forgotPassword,sx:{color:"primary.main",textAlign:"right",display:"block"},children:"Forgot Password?"})]}),e.jsx(C,{variant:"contained",fullWidth:!0,type:"submit",sx:{mb:2,mt:3},loading:s,disabled:s||!y,children:"Login"})]}),e.jsxs(x,{variant:"body2",align:"center",sx:{marginTop:2},children:["New user?"," ",e.jsx(j,{to:f.userSignup,style:{color:"#2563eb",textDecoration:"none",fontWeight:500},children:"Sign up"})]})]})})},O=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(X,{})});export{O as LoginPage};
